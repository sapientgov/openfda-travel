<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="google-signin-client_id" content="911719545649-998dntke34uvnet6khmtivk5i58g0c2d.apps.googleusercontent.com">
    <title>1515 App</title>
    <link href="css/appstyles.css" rel="stylesheet" type="text/css">
    <script id="digits-sdk" src="https://cdn.digits.com/1/sdk.js" async></script>
</head>

<body>
    <header role="banner">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>

                    <a href="#" class="navbar-brand">FDA<strong>Anywhere</strong></a> 
                </div>
                <div class="navbar-collapse collapse" id="navbar"></div>
                <!--/.navbar-collapse -->
            </div>
        </nav>
    </header>

    <!-- main content -->
    <main id="content" role="main">
        <section>
            <div class="container">
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
                <button class="btn btn-default" id="btn-twitter" onclick="twitLogin()" type="submit">Login with Digits</button>
                <button class="btn btn-default" id="btn-logout" onclick="logout();" type="submit">Logout</button>
            </div>
        </section>
    </main> <!-- /main-content -->
    
    <script type="text/javascript">
        function onSignIn(googleUser) {
            var profile = googleUser.getBasicProfile();
            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
            console.log('Name: ' + profile.getName());
            console.log('Image URL: ' + profile.getImageUrl());
            console.log('Email: ' + profile.getEmail());
        }
        
        function logout() {
            console.log('logout called');
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
                console.log('User signed out.');
            });
        }
        
        function renderButton() {
            console.log('button loaded!');
        }
        
        function twitLogin() {
            console.log('twitter!');
            Digits.logIn().done(function() {
                console.log('login success!');
            }).fail(function() {
                console.log('login error');
            });
        }
        
        //setup digits
        document.getElementById('digits-sdk').onload = function() {
          Digits.init({ consumerKey: 'WxWpS24B3UxVWqiuhSUIDKpsS' });
        }
    </script>
    
    <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
    
</body>

</html>